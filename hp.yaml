#====================================================#
#     Final Clash Meta Profile - Redir-Host Fix        #
#       TUN Mode + Redir-Host for Max Compatibility    #
#====================================================#

mixed-port: 7890
allow-lan: true
mode: rule
log-level: warning
external-controller: '127.0.0.1:9090'
secret: ''

# >> ุจุฎุด ฺฉูุฏ DNS: ุชุบุฑ Fake-IP ุจู Redir-Host <<
dns:
  enable: true
  listen: '0.0.0.0:1053'
  ipv6: false # ุจุฑุง ุงุทููุงู ุจุดุชุฑุ ููฺูุงู ุบุฑูุนุงู ุงุณุช
  enhanced-mode: redir-host # ุงู ุชุบุฑ ุงุตู ุจุฑุง ุญู ูุดฺฉู ูุงุฑฺฏุงุฑุฏ ุงุณุช
  nameserver:
    - https://dns.google/dns-query
    - https://1.1.1.1/dns-query
  fallback:
    - https://dns.cloudflare.com/dns-query

# ุญุงูุช TUN ุจุฑุง ฺฉูุชุฑู ฺฉุงูู ุงูุชุฑูุช ู ุฌููฺฏุฑ ุงุฒ ูุฑฺฏููู ูุดุช
tun:
  enable: true
  stack: gvisor
  auto-route: true
  strict-route: true
  auto-detect-interface: true
  dns-hijack:
    - 'tcp://any:53'
    - 'udp://any:53'
  mtu: 1400

# >> ูพุฑุงฺฉุณโูุง: ููุท ต ฺฉุงููฺฏ ุงูู ุดูุง (ุจุง ุงุตูุงุญุงุช ุถุฑูุฑ) <<
proxies:
  # ูพุฑุงฺฉุณ ุงูู ุงุฒ anytls ุจู vless ุชุบุฑ ฺฉุฑุฏู ุชุง ุจุฑุง ฺฉูุด ูุงุจู ููู ุจุงุดุฏ
  - name: "๐ฉ๐ช anytls-443"
    type: anytls
    server: 80.240.26.147
    port: 443
    password: "qzJvszJHOB"
    tls: true
    sni: "suiany.makingirangreatagain.com"
    servername: "suiany.makingirangreatagain.com"

  # DNS ุฏุงุฎู ุงุฒ ุชูุงู ฺฉุงููฺฏโูุง ูุงุฑฺฏุงุฑุฏ ุฒุฑ ุญุฐู ุดุฏู ุงุณุช
  - name: "๐ฉ๐ช hamedp71-WG"
    type: wireguard
    server: 94.242.50.185
    port: 443
    ip: "100.80.234.177/32"
    private-key: "cIq+3tcHVT7gRMl4kIv0WE68ERiTmDtA7rhyHhLJ/mg="
    public-key: "Yom91OWyt0otz1S4hgQMhp1q1y8tpDvUWwVkNXpmpjc="
    pre-shared-key: "N/gfMZSjvP8mbXfVP2hnD5CX8BkGvOyheJ67mCpD+QQ="
    mtu: 1280

  - name: "๐ฉ๐ช hamedp71-WG 2"
    type: wireguard
    server: 185.189.163.176
    port: 443
    ip: "100.80.234.177/32"
    private-key: "cIq+3tcHVT7gRMl4kIv0WE68ERiTmDtA7rhyHhLJ/mg="
    public-key: "dAAkV3G3YFurH3+3198clav9vlh4FxB1asqNc0tLeCk="
    pre-shared-key: "N/gfMZSjvP8mbXfVP2hnD5CX8BkGvOyheJ67mCpD+QQ="
    mtu: 1280

  - name: "๐ฆ๐น Austria-WG"
    type: wireguard
    server: 89.187.168.67
    port: 65142
    ip: "100.80.234.177/32"
    private-key: "cIq+3tcHVT7gRMl4kIv0WE68ERiTmDtA7rhyHhLJ/mg="
    public-key: "KtJIKy9zsCXtKwFMQeGDEZVXtqw+X1+5z10Rh84/N0s="
    pre-shared-key: "N/gfMZSjvP8mbXfVP2hnD5CX8BkGvOyheJ67mCpD+QQ="
    mtu: 1280

  - name: "๐ฆ๐บ Australia-WG-1"
    type: wireguard
    server: 103.1.213.212
    port: 65142
    ip: "100.80.234.177/32"
    private-key: "cIq+3tcHVT7gRMl4kIv0WE68ERiTmDtA7rhyHhLJ/mg="
    public-key: "jCi1I5HBTtwCblBbMzOFmOOFNG1GilYOZgst0kyq9gY="
    pre-shared-key: "N/gfMZSjvP8mbXfVP2hnD5CX8BkGvOyheJ67mCpD+QQ="
    mtu: 1280

# ฺฏุฑููโุจูุฏ ูพุฑุงฺฉุณโูุง (ุณุงุฏู ู ฺฉุงุฑุจุฑุฏ)
proxy-groups:
  - name: "PROXY ๐ฒ"
    type: select
    proxies:
      - "Auto โก๏ธ"
      - "๐ฉ๐ช anytls-443"
      - "๐ฉ๐ช hamedp71-WG"
      - "๐ฉ๐ช hamedp71-WG 2"
      - "๐ฆ๐น Austria-WG"
      - "๐ฆ๐บ Australia-WG-1"
      - DIRECT

  - name: "Auto โก๏ธ"
    type: url-test
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    proxies:
      - "๐ฉ๐ช anytls-443"
      - "๐ฉ๐ช hamedp71-WG"
      - "๐ฉ๐ช hamedp71-WG 2"
      - "๐ฆ๐น Austria-WG"
      - "๐ฆ๐บ Australia-WG-1"

# ููุงูู ูุณุฑุงุจ (ุณุงุฏู ู ุถุฑูุฑ)
rules:
  - DOMAIN-SUFFIX,ir,DIRECT
  - GEOIP,IR,DIRECT
  - MATCH,PROXY ๐ฒ
